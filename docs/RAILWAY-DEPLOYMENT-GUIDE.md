# ðŸš€ Railway Deployment Guide for JobTracker Backend

## Prerequisites
- [Railway account](https://railway.app) (free tier available)
- Git repository with your backend code
- GitHub account

## Step 1: Prepare for Deployment

âœ… **Already done:**
- Updated Prisma schema to use PostgreSQL
- Added production scripts to package.json
- Created railway.json configuration
- Added PostgreSQL driver (pg) dependency
- Created Dockerfile for containerization

## Step 2: Deploy to Railway

### 2.1 Create Railway Project
1. Go to [railway.app](https://railway.app)
2. Click "Start a New Project"
3. Choose "Deploy from GitHub repo"
4. Connect your GitHub account
5. Select your JobTracker repository
6. Choose the `JobTracker-Backend` folder as the source

### 2.2 Add PostgreSQL Database
1. In your Railway project dashboard
2. Click "New Service"
3. Choose "Database" â†’ "PostgreSQL"
4. Railway will automatically create a PostgreSQL instance
5. The `DATABASE_URL` environment variable will be auto-generated

### 2.3 Configure Environment Variables
In Railway dashboard â†’ Your Service â†’ Variables tab, add:

```bash
NODE_ENV=production
JWT_SECRET=your-super-secure-jwt-secret-change-this
JWT_EXPIRES_IN=7d
PORT=3001
CORS_ORIGIN=https://your-frontend-domain.vercel.app
```

**Important:** Generate a strong JWT_SECRET using:
```bash
node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
```

### 2.4 Deploy
1. Railway will automatically deploy when you push to GitHub
2. First deployment may take 5-10 minutes
3. Check the logs for any errors

## Step 3: Run Database Migrations

After successful deployment:

1. Go to Railway dashboard â†’ Your Service â†’ Deploy logs
2. Find the deployment terminal or use Railway CLI
3. Run database migration:
```bash
npx prisma migrate deploy
```

Or using Railway CLI:
```bash
railway run npx prisma migrate deploy
```

## Step 4: Test Your Deployment

Your backend will be available at: `https://your-app-name.up.railway.app`

Test endpoints:
- Health check: `GET https://your-app-name.up.railway.app/health`
- API base: `GET https://your-app-name.up.railway.app/api`

## Step 5: Update Frontend Configuration

After successful backend deployment, update your frontend to use the production API URL:

In your frontend project, update the API URL:
```javascript
// In JobTracker/src/services/api.js
const API_BASE_URL = 'https://your-app-name.up.railway.app/api'
```

## Environment Variables Reference

| Variable | Description | Example |
|----------|-------------|---------|
| `DATABASE_URL` | PostgreSQL connection string | Auto-generated by Railway |
| `JWT_SECRET` | Secret key for JWT tokens | Generate with crypto.randomBytes |
| `NODE_ENV` | Environment mode | `production` |
| `PORT` | Server port | `3001` |
| `CORS_ORIGIN` | Frontend domain for CORS | `https://yourapp.vercel.app` |

## Troubleshooting

### Common Issues:

1. **Database Connection Error**
   - Ensure PostgreSQL service is running
   - Check DATABASE_URL is correctly set
   - Run migrations: `npx prisma migrate deploy`

2. **Build Failures**
   - Check build logs in Railway dashboard
   - Ensure all dependencies are in package.json
   - Verify Node.js version compatibility

3. **Environment Variables**
   - Double-check all required variables are set
   - Restart deployment after adding variables

4. **Port Issues**
   - Railway auto-assigns PORT, don't hardcode it
   - Use `process.env.PORT || 3001`

### Useful Commands:

```bash
# Check service status
railway status

# View logs
railway logs

# Run commands in production
railway run <command>

# Connect to production database
railway run npx prisma studio
```

## Next Steps

1. âœ… Deploy backend to Railway
2. Test all API endpoints work
3. Deploy frontend to Vercel
4. Update frontend API URLs
5. Test full application flow
6. Set up monitoring and logging

## Security Notes

- Never commit `.env` files to Git
- Use strong, unique JWT secrets
- Keep Railway dashboard access secure
- Regularly update dependencies
- Monitor for security vulnerabilities

---

**Success!** Your JobTracker backend should now be running on Railway with PostgreSQL database! ðŸŽ‰
